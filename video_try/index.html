<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rob's P5 Testing Playground...</title>
  <script src="../js/p5/p5.min.js"></script>
  <script src="../js/p5/p5.dom.min.js"></script>

</head>
<body>


  <script>

  var video;
  var vScale = 20;



  function setup() {
    createCanvas(640,480);
    pixelDensity(1);
    video = createCapture(VIDEO);
    video.size(width/vScale, height/vScale);
  }

  function draw() {
    background(51);

    video.loadPixels();
    loadPixels();

    for ( var y = 0; y < video.height; y++) {
      for ( var x = 0; x < video.width; x++) {
        var index = (x + (y * video.width))*4;
        var r = video.pixels[index+0];
        var g = video.pixels[index+1];
        var b = video.pixels[index+2];

        var bright = (r+g+b)/3;

        pixels[index+0] = 255-(bright/3);
        pixels[index+1] = 255-bright/3;
        pixels[index+2] = 255-bright/3;
        pixels[index+3] = 255;
      }
    }
    updatePixels();
    fill(255);
    ellipse(50, 50, 80, 80);
    fill(0);
    ellipse(50, 50, 20, 20);
    fill(255);
    ellipse(200, 50, 80, 80);
    fill(0);
    ellipse(200, 50, 20, 20);
  }


  </script>

  </body>
</html>
