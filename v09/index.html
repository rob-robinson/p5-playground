<!DOCTYPE html>
<html lang="en">
<head>
  <title>Rob's P5 Testing Playground...</title>
  <script src="../js/p5/p5.min.js"></script>
  <script src="../js/p5/p5.dom.min.js"></script>

</head>
<body>

  <script>

  var video;
  var vScale = 25;

  function setup() {
    createCanvas(640,480);
    pixelDensity(1);
    video = createCapture(VIDEO);
    video.size(width/vScale, height/vScale);
  }

  function draw() {
    background(51);

    video.loadPixels();
    loadPixels();

    for ( var y = 0; y < video.height; y+=vScale) {
      for ( var x = 0; x < video.width; x+=vScale) {

        var index = (x + (y * video.width))*4;
        var r = video.pixels[index+0];
        var g = video.pixels[index+1];
        var b = video.pixels[index+2];

        var bright = (r+g+b)/3;

        fill(bright);
        var w = map(bright, 0, 255, 0, vScale)
        rect(x,y,w,w);

      }
    }
  }

  </script>

  </body>
</html>
